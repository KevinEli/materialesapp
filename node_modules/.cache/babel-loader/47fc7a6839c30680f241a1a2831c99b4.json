{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kcastillo\\\\Documents\\\\Prueba\\\\materialesapp\\\\src\\\\pages\\\\order\\\\Edit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport firebase from \"../../firebase\";\nimport DataTable from 'react-data-table-component';\nimport { Button, Tooltip, Modal, ModalBody, ModalFooter, Container } from \"reactstrap\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash, faPlusCircle, faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { paginationOptions, paginationPerPage, paginationRowsPerPageOptions, fixedHeaderScrollHeight } from '../../components/DataTableConfig'; //import Cookies from 'universal-cookie';\n\nimport LoadSpinner from '../../components/LoadSpinner';\nimport ToastMessage from '../../components/ToastMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst OrderEdit = prop => {\n  _s();\n\n  //const baseUrl = `${configData.SERVER_URL}Parametrizacion/`;\n  //const cookies = new Cookies();\n  const history = useHistory();\n  const getId = prop.match.params.id;\n  /* HOOKS */\n\n  const [loading, setLoading] = useState(false); //const [modalEliminar, setModalEliminar] = useState(false);\n\n  const [mensajePanelCargar, setMensajePanelCargar] = useState(\"\");\n  const mensajeVacio = {\n    show: false,\n    icon: \"white\",\n    title: \"\",\n    message: \"\",\n    position: \"10%\"\n  };\n  const [mensaje, setMensaje] = useState(mensajeVacio);\n  const [tooltipOpen, setTooltipOpen] = useState(false);\n\n  const toggle = () => setTooltipOpen(!tooltipOpen);\n\n  const closeMensaje = () => {\n    setTimeout(() => {\n      setMensaje(mensajeVacio);\n    }, 3000);\n  };\n\n  const formEncabezadoOrden = {\n    Id: 0,\n    Numero_Orden: '',\n    Fecha_Orden: 0,\n    Nombre_Cliente: '',\n    Estado_Orden: 'registrada',\n    Total_Orden: 0,\n    Detalle: {}\n  };\n  const formDetalleOrden = {\n    Id: 0,\n    Detalle_Id: 0,\n    Codigo_Producto: '',\n    Nombre_Producto: 0,\n    Cantidad: '',\n    Precio: 0,\n    Monto: 0\n  }; // Hooks Principales  Encabezado y Detalle\n\n  const [ordenEncabezado, setOrdenEncabezado] = useState([formEncabezadoOrden]);\n  const [ordenDetalle, setOrdenDetalle] = useState([]); // Hook para controlar los eventos de registro de detalle en el grid\n\n  const [detalle, setDetalle] = useState([formDetalleOrden]); //Hook para presentar información del detalle a eliminar\n\n  const [detalleDelete, setDetalleDelete] = useState([formDetalleOrden]);\n  /* FIN HOOKS */\n\n  /* Eventos Handle o onChanged de controles */\n\n  const handleInputChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setOrdenEncabezado({ ...ordenEncabezado,\n      [name]: value\n    });\n  };\n\n  const handleInputDetalleChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setDetalle({ ...detalle,\n      [name]: value\n    });\n  };\n\n  const listSelection = () => {\n    if (!detalle.Nombre_Producto || !detalle.Codigo_Producto) {\n      setMensaje({\n        show: true,\n        icon: \"warning\",\n        title: \"Advertencia\",\n        message: \"Defina el nombre y código del producto que desea agregar\",\n        position: \"50%\"\n      });\n      closeMensaje();\n      return;\n    }\n\n    if (!detalle.Cantidad) {\n      setMensaje({\n        show: true,\n        icon: \"warning\",\n        title: \"Advertencia\",\n        message: \"Defina la cantidad del producto\",\n        position: \"50%\"\n      });\n      closeMensaje();\n      return;\n    }\n\n    if (!detalle.Detalle_Id) {\n      if (ordenDetalle.length > 0) {\n        var maxIndex = Math.max(...ordenDetalle.map(item => item.Detalle_Id));\n        detalle.Detalle_Id = maxIndex + 1;\n      } else {\n        detalle.Detalle_Id = 1;\n      }\n    }\n\n    detalle.Monto = detalle.Precio * detalle.Cantidad;\n    setOrdenDetalle(ordenDetalle.includes(detalle) ? ordenDetalle.filter(index => index !== detalle) : [...ordenDetalle, detalle]);\n    setDetalle([formDetalleOrden]);\n  };\n  /* Fin de Eventos Handle o onChanged de controles */\n\n  /* Acciones Detalles(Grid, Botones, Eventos) */\n\n\n  const columns = [{\n    name: 'Detalle Id',\n    selector: 'Detalle_Id',\n    sortable: true,\n    width: '150px'\n  }, {\n    name: 'Codigo Producto',\n    selector: 'Codigo_Producto',\n    sortable: true,\n    left: true,\n    width: '150px'\n  }, {\n    name: 'Nombre Producto',\n    selector: 'Nombre_Producto',\n    sortable: true,\n    left: true,\n    width: '300px'\n  }, {\n    name: 'Cantidad',\n    selector: 'Cantidad',\n    sortable: true,\n    right: true,\n    width: '100px'\n  }, {\n    name: 'Precio Unitario',\n    selector: 'Precio',\n    sortable: true,\n    right: true,\n    width: '100px'\n  }, {\n    name: 'Monto Total',\n    selector: 'Monto',\n    sortable: true,\n    right: true,\n    width: '150px'\n  }, {\n    name: 'Eliminar',\n    button: true,\n    cell: row => /*#__PURE__*/_jsxDEV(Button, {\n      className: \"btn btn-danger\",\n      onClick: () => eliminarDetalleOrden(row, \"Eliminar\"),\n      children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        icon: faTrash\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 117\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 28\n    }, this)\n  }];\n  /*\r\n      const abrirCerrarModalEliminar = () => {\r\n          setModalEliminar(!modalEliminar);\r\n      };\r\n  \r\n      const eliminarDetalle = (detalle) => {\r\n          setDetalleDelete(detalle);\r\n          abrirCerrarModalEliminar();\r\n  \r\n      }\r\n  \r\n      const deleteDetalle = async () => {\r\n          setLoading(true);\r\n          setOrdenDetalle(ordenDetalle.filter(filtro => filtro.Asiento_Definicion_Detalle_Id !== detalleDelete.Asiento_Definicion_Detalle_Id));\r\n          setDetalleDelete([formDetalleOrden]);\r\n          setLoading(false);\r\n          abrirCerrarModalEliminar();\r\n      };*/\n\n  const eliminarDetalleOrden = row => {\n    if (window.confirm(`Estás seguro que deseas eliminar el detalle ${row && row.Detalle_Id}?`)) {\n      setOrdenDetalle(ordenDetalle.filter(filtro => filtro.Detalle_Id !== row.Detalle_Id));\n      /*  firebase.child(`orden/${row.Id}`).remove(\r\n            error => {\r\n                if (error) {\r\n                    setMensaje({ show: true, icon: \"danger\", title: \"Error\", message: \"Ocurrió un problema procesando la eliminación\", position: \"10%\" });\r\n                    closeMensaje();\r\n                }\r\n            });*/\n    }\n  };\n  /* Fin Acciones Detalles(Grid, Botones, Eventos) */\n\n  /* Acciones Encabezado(Botones, Eventos) */\n\n\n  const updateOrder = e => {\n    e.preventDefault();\n\n    if (!ordenEncabezado.Numero_Orden) {\n      setMensaje({\n        show: true,\n        icon: \"warning\",\n        title: \"Advertencia\",\n        message: \"Defina el número de la orden\",\n        position: \"10%\"\n      });\n      closeMensaje();\n      return;\n    }\n\n    if (!ordenEncabezado.Nombre_Cliente) {\n      setMensaje({\n        show: true,\n        icon: \"warning\",\n        title: \"Advertencia\",\n        message: \"Defina el nombre del cliente\",\n        position: \"10%\"\n      });\n      closeMensaje();\n      return;\n    }\n\n    if (ordenDetalle.length === 0) {\n      setMensaje({\n        show: true,\n        icon: \"warning\",\n        title: \"Advertencia\",\n        message: \"Defina al menos un producto detalle\",\n        position: \"10%\"\n      });\n      closeMensaje();\n      return;\n    }\n\n    ordenEncabezado.Detalle = ordenDetalle;\n    setMensajePanelCargar(\"Procesando Registro, Por Favor Espere\");\n    setLoading(true);\n\n    if (getId !== \"0\") {\n      firebase.child(`orden/${ordenEncabezado.Id}`).set(ordenEncabezado, error => {\n        if (error) {\n          setMensaje({\n            show: true,\n            icon: \"danger\",\n            title: \"Error\",\n            message: \"Ocurrió un problema procesando la actualización\",\n            position: \"10%\"\n          });\n          closeMensaje();\n        } else {\n          setLoading(false);\n          setMensaje({\n            show: true,\n            icon: \"success\",\n            title: \"Información\",\n            message: \"Orden Actualizada Correctamente\",\n            position: \"10%\"\n          });\n          closeMensaje();\n          setTimeout(() => history.push('/order'), 1100);\n        }\n      });\n    } else {\n      firebase.child(\"orden\").push(ordenEncabezado, error => {\n        if (error) {\n          setMensaje({\n            show: true,\n            icon: \"danger\",\n            title: \"Error\",\n            message: \"Ocurrió un problema procesando el registro\",\n            position: \"10%\"\n          });\n          closeMensaje();\n        } else {\n          setLoading(false);\n          setMensaje({\n            show: true,\n            icon: \"success\",\n            title: \"Información\",\n            message: \"Orden Registrada Correctamente\",\n            position: \"10%\"\n          });\n          closeMensaje();\n          setTimeout(() => history.push('/order'), 1100);\n        }\n      });\n    }\n  };\n  /* FIN Acciones Encabezado(Botones, Eventos) */\n\n\n  useEffect(() => {\n    const obtenerInformacionOrden = () => {\n      setLoading(true);\n      firebase.child(\"orden\").orderByKey().equalTo(getId).on(\"value\", orden => {\n        if (orden.val() !== null) {\n          var listDetalle = new Array();\n          orden.forEach(function (data) {\n            var item = {\n              Id: data.key,\n              Numero_Orden: data.val().Numero_Orden,\n              Fecha_Orden: data.val().Fecha_Orden,\n              Nombre_Cliente: data.val().Nombre_Cliente,\n              Estado_Orden: data.val().Estado_Orden,\n              Total_Orden: data.val().Total_Orden\n            };\n            data.val().Detalle.forEach(function (det) {\n              var itemDetalle = {\n                Detalle_Id: det.Detalle_Id,\n                Codigo_Producto: det.Codigo_Producto,\n                Nombre_Producto: det.Nombre_Producto,\n                Monto: det.Monto,\n                Cantidad: det.Cantidad,\n                Precio: det.Precio\n              };\n              listDetalle.push(itemDetalle);\n            });\n            setOrdenDetalle(listDetalle);\n            setOrdenEncabezado(item);\n          });\n        } else {\n          setOrdenEncabezado(formEncabezadoOrden);\n        }\n\n        setTimeout(() => {\n          setLoading(false);\n        }, 200);\n      });\n    };\n\n    obtenerInformacionOrden();\n    /*if (cookies.get('id')) {\r\n        if (getId) {\r\n            if (getId !== \"0\") {\r\n                obtenerInformacionOrden();\r\n            }\r\n        }\r\n    }*/\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [loading ? /*#__PURE__*/_jsxDEV(LoadSpinner, {\n      Mensaje: mensajePanelCargar\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 24\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(ToastMessage, {\n      message: mensaje.message,\n      title: mensaje.title,\n      show: mensaje.show,\n      icon: mensaje.icon,\n      position: mensaje.position\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n          \"aria-label\": \"breadcrumb\",\n          children: /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"breadcrumb\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"breadcrumb-item text-primary\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"/#\",\n                onClick: ev => {\n                  ev.preventDefault();\n                  history.push(`/order`);\n                },\n                style: {\n                  \"cursor\": \"pointer\"\n                },\n                children: \"Ordenes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 74\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"breadcrumb-item active\",\n              \"aria-current\": \"page\",\n              children: \"Registro o Actualizaci\\xF3n de Ordenes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-primary\",\n          children: \"Registro o Actualizaci\\xF3n de Ordenes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm mb-1\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              type: \"submit\",\n              className: \"btn-primary_override float-right\",\n              onClick: updateOrder,\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faPlusCircle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 33\n              }, this), \" \", getId === \"0\" ? \"Guardar\" : \"Actualizar\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"N\\xFAmero de la Orden\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              autoComplete: \"off\",\n              name: \"Numero_Orden\",\n              value: ordenEncabezado.Numero_Orden || \"\",\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"inputState\",\n              children: \"Estado Orden\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"inputState\",\n              className: \"form-control\",\n              name: \"Estado_Orden\",\n              value: ordenEncabezado.Estado_Orden || \"\",\n              onChange: handleInputChange,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Registrada\",\n                children: \"Registrada\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Aprobada\",\n                children: \"Aprobada\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Entregada\",\n                children: \"Entragada\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Nombre del Cliente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              autoComplete: \"off\",\n              name: \"Nombre_Cliente\",\n              value: ordenEncabezado.Nombre_Cliente || \"\",\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          className: \"form-group fieldset-custom\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"legend\", {\n              className: \"col-form-label col-sm pt-1 text-primary\",\n              children: \"Detalles de Productos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-1 mb-1 float-right\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                className: \"btn-primary_override\",\n                id: \"btnSearch\",\n                onClick: () => listSelection(),\n                style: {\n                  \"marginTop\": \"28px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faSearch\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                placement: \"right\",\n                isOpen: tooltipOpen,\n                target: \"btnSearch\",\n                toggle: toggle,\n                children: \"Buscar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"codigo_Producto\",\n                children: \"C\\xF3digo Producto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"codigo_Producto\",\n                type: \"text\",\n                autoComplete: \"off\",\n                className: \"form-control\",\n                name: \"Codigo_Producto\",\n                value: detalle.Codigo_Producto || \"\",\n                onChange: handleInputDetalleChange,\n                disabled: \"disabled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"nombre_Producto\",\n                children: \"Nombre_Producto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"nombre_Producto\",\n                type: \"text\",\n                autoComplete: \"off\",\n                className: \"form-control\",\n                name: \"Nombre_Producto\",\n                value: detalle.Nombre_Producto || \"\",\n                onChange: handleInputDetalleChange,\n                disabled: \"disabled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"precio\",\n                children: \"Precio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"precio\",\n                type: \"text\",\n                autoComplete: \"off\",\n                className: \"form-control\",\n                name: \"Precio\",\n                value: detalle.Precio || \"\",\n                onChange: handleInputDetalleChange,\n                disabled: \"disabled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"cantidad\",\n                children: \"Cantidad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"cantidad\",\n                type: \"text\",\n                autoComplete: \"off\",\n                className: \"form-control\",\n                name: \"Cantidad\",\n                value: detalle.Cantidad || \"\",\n                onChange: handleInputDetalleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group float-right\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              className: \"btn btn-success\",\n              id: \"btnAdd\",\n              onClick: () => listSelection(),\n              children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faPlusCircle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              placement: \"right\",\n              isOpen: tooltipOpen,\n              target: \"btnAdd\",\n              toggle: toggle,\n              children: \"Agregar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            children: /*#__PURE__*/_jsxDEV(DataTable, {\n              columns: columns,\n              data: ordenDetalle,\n              pagination: true,\n              paginationComponentOptions: paginationOptions,\n              fixedHeader: true,\n              fixedHeaderScrollHeight: fixedHeaderScrollHeight,\n              noHeader: true,\n              paginationPerPage: paginationPerPage,\n              paginationRowsPerPageOptions: paginationRowsPerPageOptions,\n              noDataComponent: paginationOptions.noDataComponent\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 320,\n    columnNumber: 9\n  }, this);\n};\n\n_s(OrderEdit, \"9qlB7W/kVHlPZRpN+BZBL672QZg=\", false, function () {\n  return [useHistory];\n});\n\n_c = OrderEdit;\nexport default OrderEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderEdit\");","map":{"version":3,"sources":["C:/Users/kcastillo/Documents/Prueba/materialesapp/src/pages/order/Edit.js"],"names":["React","useState","useEffect","useHistory","firebase","DataTable","Button","Tooltip","Modal","ModalBody","ModalFooter","Container","FontAwesomeIcon","faTrash","faPlusCircle","faSearch","paginationOptions","paginationPerPage","paginationRowsPerPageOptions","fixedHeaderScrollHeight","LoadSpinner","ToastMessage","OrderEdit","prop","history","getId","match","params","id","loading","setLoading","mensajePanelCargar","setMensajePanelCargar","mensajeVacio","show","icon","title","message","position","mensaje","setMensaje","tooltipOpen","setTooltipOpen","toggle","closeMensaje","setTimeout","formEncabezadoOrden","Id","Numero_Orden","Fecha_Orden","Nombre_Cliente","Estado_Orden","Total_Orden","Detalle","formDetalleOrden","Detalle_Id","Codigo_Producto","Nombre_Producto","Cantidad","Precio","Monto","ordenEncabezado","setOrdenEncabezado","ordenDetalle","setOrdenDetalle","detalle","setDetalle","detalleDelete","setDetalleDelete","handleInputChange","event","name","value","target","handleInputDetalleChange","listSelection","length","maxIndex","Math","max","map","item","includes","filter","index","columns","selector","sortable","width","left","right","button","cell","row","eliminarDetalleOrden","window","confirm","filtro","updateOrder","e","preventDefault","child","set","error","push","obtenerInformacionOrden","orderByKey","equalTo","on","orden","val","listDetalle","Array","forEach","data","key","det","itemDetalle","ev","noDataComponent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport firebase from \"../../firebase\";\r\nimport DataTable from 'react-data-table-component';\r\nimport { Button, Tooltip, Modal, ModalBody, ModalFooter, Container } from \"reactstrap\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTrash, faPlusCircle, faSearch } from '@fortawesome/free-solid-svg-icons'\r\nimport { paginationOptions, paginationPerPage, paginationRowsPerPageOptions, fixedHeaderScrollHeight }\r\n    from '../../components/DataTableConfig';\r\n//import Cookies from 'universal-cookie';\r\nimport LoadSpinner from '../../components/LoadSpinner';\r\nimport ToastMessage from '../../components/ToastMessage';\r\n\r\n\r\n\r\nconst OrderEdit = (prop) => {\r\n\r\n    //const baseUrl = `${configData.SERVER_URL}Parametrizacion/`;\r\n    //const cookies = new Cookies();\r\n    const history = useHistory();\r\n    const getId = prop.match.params.id;\r\n\r\n    /* HOOKS */\r\n    const [loading, setLoading] = useState(false);\r\n    //const [modalEliminar, setModalEliminar] = useState(false);\r\n    const [mensajePanelCargar, setMensajePanelCargar] = useState(\"\");\r\n    const mensajeVacio = { show: false, icon: \"white\", title: \"\", message: \"\", position: \"10%\" }\r\n    const [mensaje, setMensaje] = useState(mensajeVacio);\r\n    const [tooltipOpen, setTooltipOpen] = useState(false);\r\n    const toggle = () => setTooltipOpen(!tooltipOpen);\r\n    const closeMensaje = () => { setTimeout(() => { setMensaje(mensajeVacio) }, 3000); };\r\n\r\n    const formEncabezadoOrden = {\r\n        Id: 0,\r\n        Numero_Orden: '',\r\n        Fecha_Orden: 0,\r\n        Nombre_Cliente: '',\r\n        Estado_Orden: 'registrada',\r\n        Total_Orden: 0,\r\n        Detalle: {}\r\n    };\r\n\r\n    const formDetalleOrden = {\r\n        Id: 0,\r\n        Detalle_Id: 0,\r\n        Codigo_Producto: '',\r\n        Nombre_Producto: 0,\r\n        Cantidad: '',\r\n        Precio: 0,\r\n        Monto: 0\r\n    };\r\n\r\n    // Hooks Principales  Encabezado y Detalle\r\n    const [ordenEncabezado, setOrdenEncabezado] = useState([formEncabezadoOrden]);\r\n\r\n    const [ordenDetalle, setOrdenDetalle] = useState([]);\r\n\r\n\r\n    // Hook para controlar los eventos de registro de detalle en el grid\r\n    const [detalle, setDetalle] = useState([formDetalleOrden]);\r\n\r\n    //Hook para presentar información del detalle a eliminar\r\n    const [detalleDelete, setDetalleDelete] = useState([formDetalleOrden]);\r\n\r\n    /* FIN HOOKS */\r\n\r\n\r\n\r\n    /* Eventos Handle o onChanged de controles */\r\n\r\n    const handleInputChange = event => {\r\n        const { name, value } = event.target;\r\n        setOrdenEncabezado({ ...ordenEncabezado, [name]: value });\r\n    };\r\n\r\n    const handleInputDetalleChange = event => {\r\n        const { name, value } = event.target;\r\n        setDetalle({ ...detalle, [name]: value });\r\n    };\r\n\r\n    const listSelection = () => {\r\n\r\n        if (!detalle.Nombre_Producto || !detalle.Codigo_Producto) {\r\n            setMensaje({ show: true, icon: \"warning\", title: \"Advertencia\", message: \"Defina el nombre y código del producto que desea agregar\", position: \"50%\" });\r\n            closeMensaje();\r\n            return;\r\n        }\r\n\r\n        if (!detalle.Cantidad) {\r\n            setMensaje({ show: true, icon: \"warning\", title: \"Advertencia\", message: \"Defina la cantidad del producto\", position: \"50%\" });\r\n            closeMensaje();\r\n            return;\r\n        }\r\n\r\n        if (!detalle.Detalle_Id) {\r\n            if (ordenDetalle.length > 0) {\r\n                var maxIndex = Math.max(...ordenDetalle.map(item => item.Detalle_Id));\r\n                detalle.Detalle_Id = maxIndex + 1;\r\n            }\r\n            else {\r\n                detalle.Detalle_Id = 1;\r\n            }\r\n\r\n        }\r\n        detalle.Monto = detalle.Precio * detalle.Cantidad;\r\n\r\n        setOrdenDetalle(\r\n            ordenDetalle.includes(detalle)\r\n                ? ordenDetalle.filter(index => index !== detalle)\r\n                : [...ordenDetalle, detalle]\r\n        );\r\n        setDetalle([formDetalleOrden]);\r\n    }\r\n\r\n    /* Fin de Eventos Handle o onChanged de controles */\r\n\r\n\r\n\r\n    /* Acciones Detalles(Grid, Botones, Eventos) */\r\n\r\n    const columns = [\r\n        {\r\n            name: 'Detalle Id',\r\n            selector: 'Detalle_Id',\r\n            sortable: true,\r\n            width: '150px'\r\n        },\r\n        {\r\n            name: 'Codigo Producto',\r\n            selector: 'Codigo_Producto',\r\n            sortable: true,\r\n            left: true,\r\n            width: '150px'\r\n        },\r\n        {\r\n            name: 'Nombre Producto',\r\n            selector: 'Nombre_Producto',\r\n            sortable: true,\r\n            left: true,\r\n            width: '300px'\r\n        },\r\n        {\r\n            name: 'Cantidad',\r\n            selector: 'Cantidad',\r\n            sortable: true,\r\n            right: true,\r\n            width: '100px'\r\n        },\r\n        {\r\n            name: 'Precio Unitario',\r\n            selector: 'Precio',\r\n            sortable: true,\r\n            right: true,\r\n            width: '100px'\r\n        },\r\n        {\r\n            name: 'Monto Total',\r\n            selector: 'Monto',\r\n            sortable: true,\r\n            right: true,\r\n            width: '150px'\r\n        },\r\n        {\r\n            name: 'Eliminar',\r\n            button: true,\r\n            cell: (row) => <Button className=\"btn btn-danger\" onClick={() => eliminarDetalleOrden(row, \"Eliminar\")}><FontAwesomeIcon icon={faTrash} /></Button>\r\n        }\r\n    ];\r\n\r\n    /*\r\n        const abrirCerrarModalEliminar = () => {\r\n            setModalEliminar(!modalEliminar);\r\n        };\r\n    \r\n        const eliminarDetalle = (detalle) => {\r\n            setDetalleDelete(detalle);\r\n            abrirCerrarModalEliminar();\r\n    \r\n        }\r\n    \r\n        const deleteDetalle = async () => {\r\n            setLoading(true);\r\n            setOrdenDetalle(ordenDetalle.filter(filtro => filtro.Asiento_Definicion_Detalle_Id !== detalleDelete.Asiento_Definicion_Detalle_Id));\r\n            setDetalleDelete([formDetalleOrden]);\r\n            setLoading(false);\r\n            abrirCerrarModalEliminar();\r\n        };*/\r\n\r\n    const eliminarDetalleOrden = (row) => {\r\n        if (window.confirm(`Estás seguro que deseas eliminar el detalle ${row && row.Detalle_Id}?`)) {\r\n            setOrdenDetalle(ordenDetalle.filter(filtro => filtro.Detalle_Id !== row.Detalle_Id));\r\n            /*  firebase.child(`orden/${row.Id}`).remove(\r\n                  error => {\r\n                      if (error) {\r\n                          setMensaje({ show: true, icon: \"danger\", title: \"Error\", message: \"Ocurrió un problema procesando la eliminación\", position: \"10%\" });\r\n                          closeMensaje();\r\n                      }\r\n                  });*/\r\n        }\r\n\r\n    }\r\n    /* Fin Acciones Detalles(Grid, Botones, Eventos) */\r\n\r\n\r\n\r\n    /* Acciones Encabezado(Botones, Eventos) */\r\n\r\n    const updateOrder = (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!ordenEncabezado.Numero_Orden) {\r\n            setMensaje({ show: true, icon: \"warning\", title: \"Advertencia\", message: \"Defina el número de la orden\", position: \"10%\" });\r\n            closeMensaje();\r\n            return;\r\n        }\r\n        if (!ordenEncabezado.Nombre_Cliente) {\r\n            setMensaje({ show: true, icon: \"warning\", title: \"Advertencia\", message: \"Defina el nombre del cliente\", position: \"10%\" });\r\n            closeMensaje();\r\n            return;\r\n        }\r\n\r\n        if (ordenDetalle.length === 0) {\r\n            setMensaje({ show: true, icon: \"warning\", title: \"Advertencia\", message: \"Defina al menos un producto detalle\", position: \"10%\" });\r\n            closeMensaje();\r\n            return;\r\n        }\r\n\r\n        ordenEncabezado.Detalle = ordenDetalle;\r\n        setMensajePanelCargar(\"Procesando Registro, Por Favor Espere\");\r\n        setLoading(true);\r\n\r\n\r\n        if (getId !== \"0\") {\r\n            firebase.child(`orden/${ordenEncabezado.Id}`).set(\r\n                ordenEncabezado,\r\n                error => {\r\n                    if (error) {\r\n                        setMensaje({ show: true, icon: \"danger\", title: \"Error\", message: \"Ocurrió un problema procesando la actualización\", position: \"10%\" });\r\n                        closeMensaje();\r\n                    }\r\n                    else {\r\n                        setLoading(false);\r\n                        setMensaje({ show: true, icon: \"success\", title: \"Información\", message: \"Orden Actualizada Correctamente\", position: \"10%\" });\r\n                        closeMensaje();\r\n                        setTimeout(() => history.push('/order'), 1100);\r\n                    }\r\n                });\r\n        }\r\n        else {\r\n            firebase.child(\"orden\").push(ordenEncabezado,\r\n                error => {\r\n                    if (error) {\r\n                        setMensaje({ show: true, icon: \"danger\", title: \"Error\", message: \"Ocurrió un problema procesando el registro\", position: \"10%\" });\r\n                        closeMensaje();\r\n                    }\r\n                    else {\r\n                        setLoading(false);\r\n                        setMensaje({ show: true, icon: \"success\", title: \"Información\", message: \"Orden Registrada Correctamente\", position: \"10%\" });\r\n                        closeMensaje();\r\n                        setTimeout(() => history.push('/order'), 1100);\r\n                    }\r\n                });\r\n        }\r\n\r\n    };\r\n\r\n    /* FIN Acciones Encabezado(Botones, Eventos) */\r\n\r\n    useEffect(() => {\r\n\r\n        const obtenerInformacionOrden = () => {\r\n            setLoading(true);\r\n            firebase.child(\"orden\").orderByKey().equalTo(getId).on(\"value\", (orden) => {\r\n                if (orden.val() !== null) {\r\n                    var listDetalle = new Array();\r\n                    orden.forEach(function (data) {\r\n                        var item = {\r\n                            Id: data.key,\r\n                            Numero_Orden: data.val().Numero_Orden,\r\n                            Fecha_Orden: data.val().Fecha_Orden,\r\n                            Nombre_Cliente: data.val().Nombre_Cliente,\r\n                            Estado_Orden: data.val().Estado_Orden,\r\n                            Total_Orden: data.val().Total_Orden,\r\n                        }\r\n\r\n                        data.val().Detalle.forEach(function (det) {\r\n                            var itemDetalle = {\r\n                                Detalle_Id: det.Detalle_Id,\r\n                                Codigo_Producto: det.Codigo_Producto,\r\n                                Nombre_Producto: det.Nombre_Producto,\r\n                                Monto: det.Monto,\r\n                                Cantidad: det.Cantidad,\r\n                                Precio: det.Precio\r\n                            }\r\n                            listDetalle.push(itemDetalle);\r\n                        });\r\n                        setOrdenDetalle(listDetalle);\r\n                        setOrdenEncabezado(item);\r\n                    });\r\n                } else {\r\n                    setOrdenEncabezado(formEncabezadoOrden);\r\n                }\r\n                setTimeout(() => { setLoading(false) }, 200);\r\n            });\r\n        };\r\n\r\n        obtenerInformacionOrden();\r\n        /*if (cookies.get('id')) {\r\n            if (getId) {\r\n                if (getId !== \"0\") {\r\n                    obtenerInformacionOrden();\r\n                }\r\n            }\r\n        }*/\r\n    }, []);// eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            {loading ? <LoadSpinner Mensaje={mensajePanelCargar} /> : \"\"}\r\n            <ToastMessage message={mensaje.message} title={mensaje.title} show={mensaje.show} icon={mensaje.icon} position={mensaje.position} />\r\n            <Container>\r\n                <div className=\"\">\r\n                    <nav aria-label=\"breadcrumb\">\r\n                        <ol className=\"breadcrumb\">\r\n                            <li className=\"breadcrumb-item text-primary\"><a href=\"/#\" onClick={ev => { ev.preventDefault(); history.push(`/order`) }} style={{ \"cursor\": \"pointer\" }}>Ordenes</a></li>\r\n                            <li className=\"breadcrumb-item active\" aria-current=\"page\">Registro o Actualización de Ordenes</li>\r\n                        </ol>\r\n                    </nav>\r\n                    <h4 className=\"text-primary\">Registro o Actualización de Ordenes</h4>\r\n                </div>\r\n                <form>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm mb-1\">\r\n                            <Button variant=\"primary\" type=\"submit\" className=\"btn-primary_override float-right\" onClick={updateOrder}>\r\n                                <FontAwesomeIcon icon={faPlusCircle} /> {getId === \"0\" ? \"Guardar\" : \"Actualizar\"}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm mb-1\">\r\n                            <label>Número de la Orden</label>\r\n                            <input type=\"text\" className=\"form-control\" autoComplete=\"off\" name=\"Numero_Orden\" value={ordenEncabezado.Numero_Orden || \"\"} onChange={handleInputChange} />\r\n                        </div>\r\n                        <div className=\"col-sm mb-1\">\r\n                            <label htmlFor=\"inputState\">Estado Orden</label>\r\n                            <select id=\"inputState\" className=\"form-control\" name=\"Estado_Orden\" value={ordenEncabezado.Estado_Orden || \"\"} onChange={handleInputChange}>\r\n                                <option value=\"Registrada\">Registrada</option>\r\n                                <option value=\"Aprobada\">Aprobada</option>\r\n                                <option value=\"Entregada\">Entragada</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm mb-3\">\r\n                            <label>Nombre del Cliente</label>\r\n                            <input type=\"text\" className=\"form-control\" autoComplete=\"off\" name=\"Nombre_Cliente\" value={ordenEncabezado.Nombre_Cliente || \"\"} onChange={handleInputChange} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <fieldset className=\"form-group fieldset-custom\">\r\n                        <div className=\"row\">\r\n                            <legend className=\"col-form-label col-sm pt-1 text-primary\">Detalles de Productos</legend>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-sm-1 mb-1 float-right\">\r\n                                <Button className=\"btn-primary_override\" id={\"btnSearch\"} onClick={() => listSelection()} style={{ \"marginTop\": \"28px\" }}>\r\n                                    <FontAwesomeIcon icon={faSearch} />\r\n                                </Button>\r\n                                <Tooltip\r\n                                    placement={\"right\"}\r\n                                    isOpen={tooltipOpen}\r\n                                    target={\"btnSearch\"}\r\n                                    toggle={toggle}>\r\n                                    Buscar\r\n                            </Tooltip>\r\n                            </div>\r\n                            <div className=\"col-sm mb-1\">\r\n                                <label htmlFor=\"codigo_Producto\">Código Producto</label>\r\n                                <input id=\"codigo_Producto\" type=\"text\" autoComplete=\"off\" className=\"form-control\" name=\"Codigo_Producto\" value={detalle.Codigo_Producto || \"\"} onChange={handleInputDetalleChange} disabled='disabled' />\r\n                            </div>\r\n                            <div className=\"col-sm mb-1\">\r\n                                <label htmlFor=\"nombre_Producto\">Nombre_Producto</label>\r\n                                <input id=\"nombre_Producto\" type=\"text\" autoComplete=\"off\" className=\"form-control\" name=\"Nombre_Producto\" value={detalle.Nombre_Producto || \"\"} onChange={handleInputDetalleChange} disabled='disabled' />\r\n                            </div>\r\n                            <div className=\"col-sm mb-1\">\r\n                                <label htmlFor=\"precio\">Precio</label>\r\n                                <input id=\"precio\" type=\"text\" autoComplete=\"off\" className=\"form-control\" name=\"Precio\" value={detalle.Precio || \"\"} onChange={handleInputDetalleChange} disabled='disabled' />\r\n                            </div>\r\n                            <div className=\"col-sm mb-1\">\r\n                                <label htmlFor=\"cantidad\">Cantidad</label>\r\n                                <input id=\"cantidad\" type=\"text\" autoComplete=\"off\" className=\"form-control\" name=\"Cantidad\" value={detalle.Cantidad || \"\"} onChange={handleInputDetalleChange} />\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div className=\"form-group float-right\">\r\n                            <Button className=\"btn btn-success\" id={\"btnAdd\"} onClick={() => listSelection()}>\r\n                                <FontAwesomeIcon icon={faPlusCircle} />\r\n                            </Button>\r\n                            <Tooltip\r\n                                placement={\"right\"}\r\n                                isOpen={tooltipOpen}\r\n                                target={\"btnAdd\"}\r\n                                toggle={toggle}>\r\n                                Agregar\r\n                            </Tooltip>\r\n                        </div>\r\n                        <div className=\"table-responsive\">\r\n                            <DataTable\r\n                                columns={columns}\r\n                                data={ordenDetalle}\r\n                                pagination\r\n                                paginationComponentOptions={paginationOptions}\r\n                                fixedHeader\r\n                                fixedHeaderScrollHeight={fixedHeaderScrollHeight}\r\n                                noHeader={true}\r\n                                paginationPerPage={paginationPerPage}\r\n                                paginationRowsPerPageOptions={paginationRowsPerPageOptions}\r\n                                noDataComponent={paginationOptions.noDataComponent}\r\n                            />\r\n                        </div>\r\n                    </fieldset>\r\n                </form>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OrderEdit;"]},"metadata":{},"sourceType":"module"}